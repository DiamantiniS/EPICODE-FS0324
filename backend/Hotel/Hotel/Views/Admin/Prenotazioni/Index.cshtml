@model IEnumerable<Hotel.Models.Prenotazione>

@{
    ViewData["Title"] = "Prenotazioni";
}

<h2>Prenotazioni</h2>

<p>
    <button class="btn btn-primary" data-toggle="modal" data-target="#createPrenotazioneModal">Crea nuova prenotazione</button>
</p>

<table class="table">
    <thead>
        <tr>
            <th>Cliente</th>
            <th>Camera</th>
            <th>Data Prenotazione</th>
            <th>Dal</th>
            <th>Al</th>
            <th>Caparra</th>
            <th>Tariffa</th>
            <th>Tipologia Soggiorno</th>
            <th>Azioni</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Cliente?.Cognome @item.Cliente?.Nome</td>
                <td>@item.Camera?.Descrizione</td>
                <td>@item.DataPrenotazione.ToString("dd/MM/yyyy")</td>
                <td>@item.Dal.ToString("dd/MM/yyyy")</td>
                <td>@item.Al.ToString("dd/MM/yyyy")</td>
                <td>@item.Caparra</td>
                <td>@item.Tariffa</td>
                <td>@item.TipologiaSoggiorno</td>
                <td>
                    <button class="btn btn-warning" data-toggle="modal" data-target="#editPrenotazioneModal-@item.Id">Modifica</button>
                    <button class="btn btn-info" data-toggle="modal" data-target="#detailsPrenotazioneModal-@item.Id">Dettagli</button>
                    <button class="btn btn-danger" data-toggle="modal" data-target="#deletePrenotazioneModal-@item.Id">Elimina</button>
                </td>
            </tr>
        }
    </tbody>
</table>

@foreach (var item in Model)
{
    <!-- Modale Modifica Prenotazione -->
    <div class="modal fade" id="editPrenotazioneModal-@item.Id" tabindex="-1" role="dialog" aria-labelledby="editPrenotazioneModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editPrenotazioneModalLabel">Modifica Prenotazione</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form asp-action="Edit" method="post">
                        <input type="hidden" asp-for="Id" value="@item.Id" />
                        <div class="form-group">
                            <label asp-for="ClienteId" class="control-label"></label>
                            <select asp-for="ClienteId" class="form-control">
                                @foreach (var cliente in ViewBag.Clienti)
                                {
                                    <option value="@cliente.Id" @(cliente.Id == item.ClienteId ? "selected" : "")>@cliente.Cognome @cliente.Nome</option>
                                }
                            </select>
                        </div>
                        <div class="form-group">
                            <label asp-for="CameraId" class="control-label"></label>
                            <select asp-for="CameraId" class="form-control">
                                @foreach (var camera in ViewBag.Camere)
                                {
                                    <option value="@camera.Id" @(camera.Id == item.CameraId ? "selected" : "")>@camera.Descrizione</option>
                                }
                            </select>
                        </div>
                        <div class="form-group">
                            <label asp-for="DataPrenotazione" class="control-label"></label>
                            <input asp-for="DataPrenotazione" class="form-control" value="@item.DataPrenotazione.ToString("yyyy-MM-dd")" />
                        </div>
                        <div class="form-group">
                            <label asp-for="Dal" class="control-label"></label>
                            <input asp-for="Dal" class="form-control" value="@item.Dal.ToString("yyyy-MM-dd")" />
                        </div>
                        <div class="form-group">
                            <label asp-for="Al" class="control-label"></label>
                            <input asp-for="Al" class="form-control" value="@item.Al.ToString("yyyy-MM-dd")" />
                        </div>
                        <div class="form-group">
                            <label asp-for="Caparra" class="control-label"></label>
                            <input asp-for="Caparra" class="form-control" value="@item.Caparra" />
                        </div>
                        <div class="form-group">
                            <label asp-for="Tariffa" class="control-label"></label>
                            <input asp-for="Tariffa" class="form-control" value="@item.Tariffa" />
                        </div>
                        <div class="form-group">
                            <label asp-for="TipologiaSoggiorno" class="control-label"></label>
                            <input asp-for="TipologiaSoggiorno" class="form-control" value="@item.TipologiaSoggiorno" />
                        </div>
                        <div class="form-group">
                            <input type="submit" value="Salva" class="btn btn-primary" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modale Dettagli Prenotazione -->
    <div class="modal fade" id="detailsPrenotazioneModal-@item.Id" tabindex="-1" role="dialog" aria-labelledby="detailsPrenotazioneModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="detailsPrenotazioneModalLabel">Dettagli Prenotazione</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label asp-for="Cliente.Cognome" class="control-label"></label>
                        <input asp-for="Cliente.Cognome" class="form-control" readonly value="@item.Cliente?.Cognome" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Cliente.Nome" class="control-label"></label>
                        <input asp-for="Cliente.Nome" class="form-control" readonly value="@item.Cliente?.Nome" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Camera.Descrizione" class="control-label"></label>
                        <input asp-for="Camera.Descrizione" class="form-control" readonly value="@item.Camera?.Descrizione" />
                    </div>
                    <div class="form-group">
                        <label asp-for="DataPrenotazione" class="control-label"></label>
                        <input asp-for="DataPrenotazione" class="form-control" readonly value="@item.DataPrenotazione.ToString("dd/MM/yyyy")" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Dal" class="control-label"></label>
                        <input asp-for="Dal" class="form-control" readonly value="@item.Dal.ToString("dd/MM/yyyy")" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Al" class="control-label"></label>
                        <input asp-for="Al" class="form-control" readonly value="@item.Al.ToString("dd/MM/yyyy")" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Caparra" class="control-label"></label>
                        <input asp-for="Caparra" class="form-control" readonly value="@item.Caparra" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Tariffa" class="control-label"></label>
                        <input asp-for="Tariffa" class="form-control" readonly value="@item.Tariffa" />
                    </div>
                    <div class="form-group">
                        <label asp-for="TipologiaSoggiorno" class="control-label"></label>
                        <input asp-for="TipologiaSoggiorno" class="form-control" readonly value="@item.TipologiaSoggiorno" />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modale Elimina Prenotazione -->
    <div class="modal fade" id="deletePrenotazioneModal-@item.Id" tabindex="-1" role="dialog" aria-labelledby="deletePrenotazioneModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deletePrenotazioneModalLabel">Elimina Prenotazione</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Sei sicuro di voler eliminare questa prenotazione?
                </div>
                <div class="modal-footer">
                    <form asp-action="Delete" method="post">
                        <input type="hidden" name="Id" value="@item.Id" />
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Chiudi</button>
                        <input type="submit" value="Elimina" class="btn btn-danger" />
                    </form>
                </div>
            </div>
        </div>
    </div>
}

<!-- Modale Crea Prenotazione -->
<div class="modal fade" id="createPrenotazioneModal" tabindex="-1" role="dialog" aria-labelledby="createPrenotazioneModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createPrenotazioneModalLabel">Crea Prenotazione</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form asp-action="Create" method="post">
                    <div class="form-group">
                        <label asp-for="ClienteId" class="control-label"></label>
                        <select asp-for="ClienteId" class="form-control">
                            @foreach (var cliente in ViewBag.Clienti)
                            {
                                <option value="@cliente.Id">@cliente.Cognome @cliente.Nome</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <label asp-for="CameraId" class="control-label"></label>
                        <select asp-for="CameraId" class="form-control">
                            @foreach (var camera in ViewBag.Camere)
                            {
                                <option value="@camera.Id">@camera.Descrizione</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <label asp-for="DataPrenotazione" class="control-label"></label>
                        <input asp-for="DataPrenotazione" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Dal" class="control-label"></label>
                        <input asp-for="Dal" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Al" class="control-label"></label>
                        <input asp-for="Al" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Caparra" class="control-label"></label>
                        <input asp-for="Caparra" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label asp-for="Tariffa" class="control-label"></label>
                        <input asp-for="Tariffa" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label asp-for="TipologiaSoggiorno" class="control-label"></label>
                        <input asp-for="TipologiaSoggiorno" class="form-control" />
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Salva" class="btn btn-primary" />
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
